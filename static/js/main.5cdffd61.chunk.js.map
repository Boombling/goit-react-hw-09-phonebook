{"version":3,"sources":["redux/phonebook/phonebook-actions.js","redux/phonebook/phonebook-operations.js","redux/phonebook/phonebook-selector.js","redux/phonebook/phonebook-reducer.js","components/Navigation.js","components/UserMenu/default-avatar.png","components/UserMenu/UserMenu.js","components/AuthNav.js","components/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/store.js","index.js","redux/auth/auth-actions.js","redux/auth/auth-reducer.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js"],"names":["fetchContactsRequest","createAction","fetchContactsSuccess","fetchContactsError","addContactSuccess","addContactsError","addContactRequest","changeFilter","deleteContactSuccess","deleteContactsError","deleteContactRequest","submit","name","number","dispatch","a","item","actions","axios","post","data","message","deletedContact","contactId","delete","then","catch","error","fetchContacts","get","getValue","state","contacts","filter","getVisibleContact","createSelector","items","filterLowerCase","toLowerCase","includes","createReducer","_","payload","map","contact","alert","id","combineReducers","styles","link","display","textDecoration","padding","fontWeight","color","activeLink","Navigation","isLoggedIn","useSelector","authSelectors","getIsAuthenticated","to","exact","style","activeStyle","container","alignItems","avatar","marginRight","UserMenu","useDispatch","getUsername","onLogout","useCallback","authOperations","logOut","src","defaultAvatar","alt","width","type","onClick","AuthNav","header","justifyContent","borderBottom","AppBar","PrivateRoute","isAuthenticated","redirectTo","children","routeProps","PublicRoute","restricted","HomeView","lazy","RegisterView","LoginView","ContactsView","App","useEffect","getCurrentUser","fallback","path","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitlist","store","configureStore","reducer","auth","persistReducer","authReducer","phonebookReduser","devContacts","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","registerRequest","registerSuccess","registerError","loginRequest","loginSuccess","loginError","logoutRequest","logoutSuccess","logoutError","getCurrentUserRequest","getCurrentUserSuccess","getCurrentUserError","initialUserState","email","user","authActions","token","defaults","baseURL","headers","common","Authorization","register","credentials","response","logIn","getState","persistedToken"],"mappings":"8UAEMA,EAAuBC,YAAa,kCACpCC,EAAuBD,YAAa,kCACpCE,EAAqBF,YAAa,gCAElCG,EAAoBH,YAAa,+BACjCI,EAAmBJ,YAAa,8BAChCK,EAAoBL,YAAa,+BAQxB,GACbD,uBACAE,uBACAC,qBACAI,aAVmBN,YAAa,oBAWhCK,oBACAF,oBACAC,mBACAG,qBAZ2BP,YAAa,kCAaxCQ,oBAZ0BR,YAAa,iCAavCS,qBAZ2BT,YAAa,mCCqB3B,GACbU,OAvBA,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAT,8CACA,WAAOC,GAAP,mBAAAC,EAAA,6DACQC,EAAO,CAAEJ,OAAMC,UAErBC,EAASG,EAAQX,qBAHnB,kBAM2BY,IAAMC,KAAK,YAAaH,GANnD,gBAMYI,EANZ,EAMYA,KACRN,EAASG,EAAQb,kBAAkBgB,IAPvC,kDASIN,EAASG,EAAQZ,iBAAiB,KAAMgB,UAT5C,0DADA,uDAwBAC,eAVqB,SAACC,GAAD,OAAe,SAACT,GACrCA,EAASG,EAAQP,wBACjBQ,IACGM,OADH,oBACuBD,IACpBE,MAAK,kBAAMX,EAASG,EAAQT,qBAAqBe,OACjDG,OAAM,SAACC,GAAD,OAAWb,EAASG,EAAQR,oBAAoBkB,EAAMN,eAM/DO,cAnCoB,kBAAM,SAACd,GAC3BA,EAASG,EAAQjB,wBAEjBkB,IACGW,IAAI,aACJJ,MAAK,gBAAGL,EAAH,EAAGA,KAAH,OAAcN,EAASG,EAAQf,qBAAqBkB,OACzDM,OAAM,SAACC,GAAD,OAAWb,EAASG,EAAQd,mBAAmBwB,EAAMN,gB,QCP1DS,EAAW,SAACC,GAAD,OAAWA,EAAMC,SAASC,QAa5B,GACbH,WACAI,kBAZwBC,YACxB,CAACL,EAHoB,SAACC,GAAD,OAAWA,EAAMC,SAASI,SAI/C,SAACH,EAAQG,GACP,IAAMC,EAAkBJ,EAAOK,cAC/B,OAAOF,EAAMH,QAAO,qBAAGrB,KAChB0B,cAAcC,SAASF,U,sBCLhCnC,EAIEe,EAJFf,qBACAE,EAGEa,EAHFb,kBACAI,EAEES,EAFFT,qBACAD,EACEU,EADFV,aAGI6B,EAAQI,YAAc,IAAD,mBACxBtC,GAAuB,SAACuC,EAAD,YAAMC,WADL,cAExBtC,GAAoB,SAAC2B,EAAD,OAAUW,EAAV,EAAUA,QAAV,OACnBX,EAAMY,KAAI,SAACC,GAAD,OAAaA,EAAQhC,QAAM2B,SAASG,EAAQ9B,MAClDiC,MAAM,GAAD,OAAIH,EAAQ9B,KAAZ,6BADT,CAEK8B,GAFL,mBAEiBX,OALM,cAMxBvB,GAAuB,SAACuB,EAAD,OAAUW,EAAV,EAAUA,QAAV,OACtBX,EAAME,QAAO,qBAAGa,KAAgBJ,QAPT,IAUrBT,EAASO,YAAc,GAAD,eACzBjC,GAAe,SAACkC,EAAD,YAAMC,YAGTK,cAAgB,CAC7BX,QACAH,Y,wHCtBIe,EAAS,CACbC,KAAM,CACJC,QAAS,eACTC,eAAgB,OAChBC,QAAS,GACTC,WAAY,IACZC,MAAO,WAETC,WAAY,CACVD,MAAO,YAGI,SAASE,IACtB,IAAMC,EAAaC,YAAYC,IAAcC,oBAE7C,OACA,gCACE,cAAC,IAAD,CAASC,GAAG,IAAIC,OAAK,EAACC,MAAOf,EAAOC,KAAMe,YAAahB,EAAOO,WAA9D,wDAICE,GAAc,cAAC,IAAD,CACbI,GAAG,aACHC,OAAK,EACLC,MAAOf,EAAOC,KACde,YAAahB,EAAOO,WAJP,iEC1BJ,UAA0B,2CCKnCP,EAAS,CACbiB,UAAW,CACTf,QAAS,OACTgB,WAAY,UAEdC,OAAQ,CACNC,YAAa,GAEfxD,KAAM,CACJyC,WAAY,IACZe,YAAa,KAIF,SAASC,IACtB,IAAMvD,EAAWwD,cACX1D,EAAO8C,YAAYC,IAAcY,aACjCC,EAAWC,uBAAY,WAC3B3D,EAAS4D,IAAeC,YACvB,CAAC7D,IAEJ,OACE,sBAAKiD,MAAOf,EAAOiB,UAAnB,UACE,qBAAKW,IAAKC,EAAeC,IAAI,GAAGC,MAAM,KAAKhB,MAAOf,EAAOmB,SACzD,uBAAMJ,MAAOf,EAAOpC,KAApB,sBAAoCA,KACpC,wBAAQoE,KAAK,SAASC,QAAST,EAA/B,uBC3BN,IAAMxB,EAAS,CACbC,KAAM,CACJC,QAAS,eACTC,eAAgB,OAChBC,QAAS,GACTC,WAAY,IACZC,MAAO,WAETC,WAAY,CACVD,MAAO,YAyBI4B,EArBC,kBACd,gCACE,cAAC,IAAD,CACErB,GAAG,YACHC,OAAK,EACLC,MAAOf,EAAOC,KACde,YAAahB,EAAOO,WAJtB,gFAQA,cAAC,IAAD,CACEM,GAAG,SACHC,OAAK,EACLC,MAAOf,EAAOC,KACde,YAAahB,EAAOO,WAJtB,gDClBEP,EAAS,CACbmC,OAAQ,CACNjC,QAAS,OACTkC,eAAgB,gBAChBlB,WAAY,SACZmB,aAAc,sBAIH,SAASC,IACtB,IAAM7B,EAAaC,YAAYC,IAAcC,oBAC7C,OACE,yBAAQG,MAAOf,EAAOmC,OAAtB,UACE,cAAC3B,EAAD,IACCC,EAAa,cAACY,EAAD,IAAe,cAAC,EAAD,O,kECbpB,SAASkB,EAAT,GAKZ,EAJCC,gBAIA,IAHAC,EAGD,EAHCA,WACAC,EAED,EAFCA,SACGC,EACJ,iBACOlC,EAAaC,YAAYC,IAAcC,oBAE7C,OACI,cAAC,IAAD,2BAAW+B,GAAX,aACKlC,EAAaiC,EAAW,cAAC,IAAD,CAAU7B,GAAI4B,O,kDCVpC,SAASG,EAAT,GAKZ,EAJCJ,gBAIA,IAHAC,EAGD,EAHCA,WACAC,EAED,EAFCA,SACGC,EACJ,iBACOlC,EAAaC,YAAYC,IAAcC,oBAE7C,OACI,cAAC,IAAD,2BAAW+B,GAAX,aACKlC,GAAckC,EAAWE,WACtB,cAAC,IAAD,CAAUhC,GAAI4B,IAEdC,KCdhB,IAAMI,EAAWC,gBAAK,kBAAM,gCACtBC,EAAeD,gBAAK,kBAAM,gCAC1BE,EAAYF,gBAAK,kBAAM,gCACvBG,EAAeH,gBAAK,kBAAM,gCAEjB,SAASI,IAEtB,IAAMrF,EAAWwD,cAMf,OAJF8B,qBAAU,WACRtF,EAAS4D,IAAe2B,oBACvB,CAACvF,IAGA,qCACE,cAACwE,EAAD,IAEA,cAAC,WAAD,CAAUgB,SAAU,wCAApB,SACA,eAAC,IAAD,WACI,cAACV,EAAD,CAAa9B,OAAK,EAACyC,KAAK,IAAxB,SACE,cAACT,EAAD,MAEF,cAACF,EAAD,CAAaW,KAAK,YAAYV,YAAU,EAACJ,WAAW,aAApD,SACE,cAACO,EAAD,MAEF,cAACJ,EAAD,CAAaW,KAAK,SAASV,YAAU,EAACJ,WAAW,aAAjD,SACE,cAACQ,EAAD,MAEF,cAACV,EAAD,CAAcgB,KAAK,aAAad,WAAW,SAA3C,SACE,cAACS,EAAD,c,oDCrBRM,EAAU,YACXC,YAAqB,CACtBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAK1DC,EAAoB,CACxBC,IAAK,OACLC,YACAC,SAAU,CAAC,UAGPC,EAAQC,YAAe,CAC3BC,QAAS,CACPC,KAAMC,YAAeR,EAAmBS,KACxC3F,SAAU4F,KAEZpB,aACAqB,aAAaC,IAIA,GAACR,QAAOS,UAFLC,YAAaV,IC9B/BW,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUb,MAAOA,EAAMA,MAAvB,SACE,cAAC,IAAD,CAAac,QAAS,KAAML,UAAWT,EAAMS,UAA7C,SACE,cAAC,IAAD,UACE,cAAC5B,EAAD,YAKRkC,SAASC,eAAe,U,wJChBpBC,EAAkBtI,YAAa,wBAC/BuI,EAAkBvI,YAAa,wBAC/BwI,EAAgBxI,YAAa,sBAE7ByI,EAAezI,YAAa,qBAC5B0I,EAAe1I,YAAa,qBAC5B2I,EAAa3I,YAAa,mBAUjB,GACbsI,kBACAC,kBACAC,gBACAI,cAZoB5I,YAAa,sBAajC6I,cAZoB7I,YAAa,sBAajC8I,YAZkB9I,YAAa,oBAa/ByI,eACAC,eACAC,aACAI,sBAd4B/I,YAAa,8BAezCgJ,sBAd4BhJ,YAAa,8BAezCiJ,oBAd0BjJ,YAAa,6B,cCZnCkJ,EAAmB,CAAEvI,KAAM,KAAMwI,MAAO,MAExCC,EAAO7G,YAAc2G,GAAD,mBACrBG,EAAYd,iBAAkB,SAAC/F,EAAD,YAAMC,QAAsB2G,QADrC,cAErBC,EAAYX,cAAe,SAAClG,EAAD,YAAMC,QAAsB2G,QAFlC,cAGrBC,EAAYR,eAAgB,kBAAMK,KAHb,cAIrBG,EAAYL,uBAAwB,SAACxG,EAAD,YAAMC,WAJrB,IAOpB6G,EAAQ/G,YAAc,MAAD,mBACtB8G,EAAYd,iBAAkB,SAAC/F,EAAD,YAAMC,QAAsB6G,SADpC,cAEtBD,EAAYX,cAAe,SAAClG,EAAD,YAAMC,QAAsB6G,SAFjC,cAGtBD,EAAYR,eAAgB,kBAAM,QAHZ,IAMrBnH,EAAQa,YAAc,MAAD,mBACtB8G,EAAYb,eAAgB,SAAChG,EAAD,YAAMC,WADZ,cAEtB4G,EAAYV,YAAa,SAACnG,EAAD,YAAMC,WAFT,cAGtB4G,EAAYP,aAAc,SAACtG,EAAD,YAAMC,WAHV,cAItB4G,EAAYJ,qBAAsB,SAACzG,EAAD,YAAKC,WAJjB,IAOrB8C,EAAkBhD,aAAc,GAAD,mBAChC8G,EAAYd,iBAAkB,kBAAM,KADJ,cAEhCc,EAAYX,cAAe,kBAAM,KAFD,cAGhCW,EAAYL,uBAAwB,kBAAM,KAHV,cAIhCK,EAAYb,eAAgB,kBAAM,KAJF,cAKhCa,EAAYV,YAAa,kBAAM,KALC,cAMhCU,EAAYJ,qBAAsB,kBAAM,KANR,cAOhCI,EAAYR,eAAgB,kBAAM,KAPF,IAUtB/F,cAAgB,CAC3BsG,OACA7D,kBACA+D,QACA5H,U,0CCrCJT,IAAMsI,SAASC,QAAU,wCAEzB,IAAMF,EAAQ,SACNA,GACArI,IAAMsI,SAASE,QAAQC,OAAOC,cAA9B,iBAAwDL,IAF1DA,EAAQ,WAKNrI,IAAMsI,SAASE,QAAQC,OAAOC,cAAgB,KAoEvC,GAACC,SAhEC,SAAAC,GAAW,8CAAI,WAAMhJ,GAAN,eAAAC,EAAA,6DAC5BD,EAASwI,EAAYf,mBADO,kBAIDrH,IAAMC,KAAK,gBAAiB2I,GAJ3B,OAIlBC,EAJkB,OAMxBR,EAAUQ,EAAS3I,KAAKmI,OACxBzI,EAASwI,EAAYd,gBAAgBuB,EAAS3I,OAPtB,gDAUxBN,EAASwI,EAAYb,cAAc,KAAMpH,UAVjB,yDAAJ,uDAgEF2I,MAlDZ,SAAAF,GAAW,8CAAI,WAAMhJ,GAAN,eAAAC,EAAA,6DACzBD,EAASwI,EAAYZ,gBADI,kBAIExH,IAAMC,KAAK,eAAgB2I,GAJ7B,OAIfC,EAJe,OAMrBR,EAAUQ,EAAS3I,KAAKmI,OACxBzI,EAASwI,EAAYX,aAAaoB,EAAS3I,OAPtB,gDAUrBN,EAAUwI,EAAYV,WAAW,KAAMvH,UAVlB,yDAAJ,uDAkDQsD,OApClB,yDAAM,WAAM7D,GAAN,SAAAC,EAAA,6DACjBD,EAASwI,EAAYT,iBADJ,kBAIP3H,IAAMC,KAAK,iBAJJ,OAMboI,IACAzI,EAASwI,EAAYR,iBAPR,gDAUbhI,EAAUwI,EAAYP,YAAY,KAAM1H,UAV3B,yDAAN,uDAoC0BgF,eAtBlB,yDAAM,WAAOvF,EAAUmJ,GAAjB,mBAAAlJ,EAAA,2DAGrBkJ,IADeC,EAFM,EAErBzC,KAAQ8B,MAFa,wDAQzBA,EAAUW,GAEVpJ,EAASwI,EAAYN,yBAVI,kBAaE9H,IAAMW,IAAI,kBAbZ,OAafkI,EAbe,OAcrBjJ,EAASwI,EAAYL,sBAAsBc,EAAS3I,OAd/B,kDAiBrBN,EAASwI,EAAYJ,oBAAoB,KAAM7H,UAjB1B,0DAAN,0DCpDR,GACbuC,mBALyB,SAAA7B,GAAK,OAAIA,EAAM0F,KAAKjC,iBAM7CjB,YAJkB,SAAAxC,GAAK,OAAIA,EAAM0F,KAAK4B,KAAKzI,S","file":"static/js/main.5cdffd61.chunk.js","sourcesContent":["import { createAction } from \"@reduxjs/toolkit\";\r\n\r\nconst fetchContactsRequest = createAction(\"phonebook/fetchContactsRequest\");\r\nconst fetchContactsSuccess = createAction(\"phonebook/fetchContactsSuccess\");\r\nconst fetchContactsError = createAction(\"phonebook/fetchContactsError\");\r\n\r\nconst addContactSuccess = createAction(\"phonebook/addContactSuccess\");\r\nconst addContactsError = createAction(\"phonebook/addContactsError\");\r\nconst addContactRequest = createAction(\"phonebook/addContactRequest\");\r\n\r\nconst changeFilter = createAction(\"phonebook/filter\");\r\n\r\nconst deleteContactSuccess = createAction(\"phonebook/deleteContactSuccess\");\r\nconst deleteContactsError = createAction(\"phonebook/deleteContactsError\");\r\nconst deleteContactRequest = createAction(\"phonebook/deleteContactRequest\");\r\n\r\nexport default {\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n  changeFilter,\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactsError,\r\n  deleteContactSuccess,\r\n  deleteContactsError,\r\n  deleteContactRequest,\r\n};","import axios from \"axios\";\r\nimport actions from \"./phonebook-actions\";\r\n\r\nconst fetchContacts = () => (dispatch) => {\r\n  dispatch(actions.fetchContactsRequest());\r\n\r\n  axios\r\n    .get('/contacts')\r\n    .then(({ data }) => dispatch(actions.fetchContactsSuccess(data)))\r\n    .catch((error) => dispatch(actions.fetchContactsError(error.message)));\r\n};\r\n\r\nconst submit =\r\n  ({ name, number }) =>\r\n  async (dispatch) => {\r\n    const item = { name, number };\r\n\r\n    dispatch(actions.addContactRequest());\r\n\r\n    try {\r\n      const { data } = await axios.post('/contacts', item);\r\n      dispatch(actions.addContactSuccess(data));\r\n    } catch (error) {\r\n      dispatch(actions.addContactsError(error.message));\r\n    }\r\n  };\r\n\r\nconst deletedContact = (contactId) => (dispatch) => {\r\n  dispatch(actions.deleteContactRequest());\r\n  axios\r\n    .delete(`/contacts/${contactId}`)\r\n    .then(() => dispatch(actions.deleteContactSuccess(contactId)))\r\n    .catch((error) => dispatch(actions.deleteContactsError(error.message)));\r\n};\r\n\r\nexport default {\r\n  submit,\r\n  deletedContact,\r\n  fetchContacts,\r\n};","import { createSelector } from \"reselect\";\r\n\r\nconst getValue = (state) => state.contacts.filter;\r\nconst getAllContacts = (state) => state.contacts.items;\r\n\r\nconst getVisibleContact = createSelector(\r\n  [getValue, getAllContacts],\r\n  (filter, items) => {\r\n    const filterLowerCase = filter.toLowerCase();\r\n    return items.filter(({ name }) =>\r\n      name.toLowerCase().includes(filterLowerCase)\r\n    );\r\n  }\r\n);\r\n\r\nexport default {\r\n  getValue,\r\n  getVisibleContact,\r\n};","import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\nimport actions from \"./phonebook-actions\";\r\n\r\nconst {\r\n  fetchContactsSuccess,\r\n  addContactSuccess,\r\n  deleteContactSuccess,\r\n  changeFilter,\r\n} = actions;\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactsSuccess]: (_, { payload }) => payload,\r\n  [addContactSuccess]: (state, { payload }) =>\r\n    state.map((contact) => contact.name).includes(payload.name)\r\n      ? alert(`${payload.name} is already in contacts.`)\r\n      : [payload, ...state],\r\n  [deleteContactSuccess]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst filter = createReducer(\"\", {\r\n  [changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n});","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nconst styles = {\r\n  link: {\r\n    display: 'inline-block',\r\n    textDecoration: 'none',\r\n    padding: 12,\r\n    fontWeight: 700,\r\n    color: '#2A363B',\r\n  },\r\n  activeLink: {\r\n    color: '#E84A5F',\r\n  },\r\n};\r\nexport default function Navigation() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\r\n\r\n  return (\r\n  <nav>\r\n    <NavLink to=\"/\" exact style={styles.link} activeStyle={styles.activeLink}>\r\n      Главная\r\n    </NavLink>\r\n\r\n    {isLoggedIn && <NavLink\r\n      to=\"/phonebook\"\r\n      exact\r\n      style={styles.link}\r\n      activeStyle={styles.activeLink}\r\n    >\r\n      Контакти\r\n    </NavLink>}\r\n  </nav>\r\n)}","export default __webpack_public_path__ + \"static/media/default-avatar.566eacd7.png\";","import React, {useCallback} from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\nimport defaultAvatar from './default-avatar.png';\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    marginRight: 4,\r\n  },\r\n  name: {\r\n    fontWeight: 700,\r\n    marginRight: 12,\r\n  },\r\n};\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n  const onLogout = useCallback(() => {\r\n    dispatch(authOperations.logOut())\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <img src={defaultAvatar} alt=\"\" width=\"32\" style={styles.avatar} />\r\n      <span style={styles.name}>Welcome, {name}</span>\r\n      <button type=\"button\" onClick={onLogout}>\r\n        Logout\r\n      </button>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst styles = {\r\n  link: {\r\n    display: 'inline-block',\r\n    textDecoration: 'none',\r\n    padding: 12,\r\n    fontWeight: 700,\r\n    color: '#2A363B',\r\n  },\r\n  activeLink: {\r\n    color: '#E84A5F',\r\n  },\r\n};\r\n\r\nconst AuthNav = () => (\r\n  <div>\r\n    <NavLink\r\n      to=\"/register\"\r\n      exact\r\n      style={styles.link}\r\n      activeStyle={styles.activeLink}\r\n    >\r\n      Регистрация\r\n    </NavLink>\r\n    <NavLink\r\n      to=\"/login\"\r\n      exact\r\n      style={styles.link}\r\n      activeStyle={styles.activeLink}\r\n    >\r\n      Логин\r\n    </NavLink>\r\n  </div>\r\n);\r\n\r\nexport default AuthNav;","  \r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Navigation from './Navigation';\r\nimport UserMenu from './UserMenu';\r\nimport AuthNav from './AuthNav';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nconst styles = {\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #2A363B',\r\n  },\r\n};\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsAuthenticated)\r\n  return (\r\n    <header style={styles.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  )\r\n}","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\n/**\r\n * - Если маршрут приватный и пользователь залогинен, рендерит компонент\r\n * - В противном случае рендерит Redirect на /login\r\n */\r\nexport default function PrivateRoute({\r\n    isAuthenticated,\r\n    redirectTo,\r\n    children,\r\n    ...routeProps\r\n}) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\r\n\r\n    return (\r\n        <Route {...routeProps}>\r\n            {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n        </Route>\r\n    );\r\n}","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\n/**\r\n * - Если маршрут ограниченный, и пользователь залогинен, рендерит редирект на /todos\r\n * - В противном случае рендерит компонент\r\n */\r\nexport default function PublicRoute({\r\n    isAuthenticated,\r\n    redirectTo,\r\n    children,\r\n    ...routeProps\r\n}) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsAuthenticated);\r\n\r\n    return (\r\n        <Route {...routeProps}>\r\n            {isLoggedIn && routeProps.restricted ? (\r\n                <Redirect to={redirectTo} />\r\n            ) : (\r\n                children\r\n            )}\r\n        </Route>\r\n    );\r\n}","import React, { Suspense, lazy, useEffect } from 'react';\r\nimport { Switch } from 'react-router-dom';\r\nimport AppBar from './components/AppBar';\r\nimport { authOperations } from './redux/auth';\r\nimport { useDispatch } from 'react-redux';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport PublicRoute from './components/PublicRoute';\r\n\r\nconst HomeView = lazy(() => import('./views/HomeView'))\r\nconst RegisterView = lazy(() => import('./views/RegisterView'))\r\nconst LoginView = lazy(() => import('./views/LoginView'))\r\nconst ContactsView = lazy(() => import('./views/ContactsView'))\r\n\r\nexport default function App() {\r\n  \r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    dispatch(authOperations.getCurrentUser())\r\n  }, [dispatch])\r\n\r\n    return (\r\n      <>\r\n        <AppBar />\r\n\r\n        <Suspense fallback={<p>...Load</p>}>\r\n        <Switch>\r\n            <PublicRoute exact path=\"/\" >\r\n              <HomeView />\r\n            </PublicRoute>\r\n            <PublicRoute path=\"/register\" restricted redirectTo=\"/phonebook\" >\r\n              <RegisterView />\r\n            </PublicRoute>\r\n            <PublicRoute path=\"/login\" restricted redirectTo=\"/phonebook\" >\r\n              <LoginView />\r\n            </PublicRoute>\r\n            <PrivateRoute path=\"/phonebook\" redirectTo=\"/login\" >\r\n              <ContactsView /> \r\n            </PrivateRoute>\r\n          </Switch>\r\n          </Suspense>\r\n      </>  \r\n    );\r\n  }","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\n// import logger from \"redux-logger\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { phonebookReduser } from './phonebook';\r\nimport { authReducer } from './auth';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n  // logger,\r\n];\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitlist: ['token'],\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: phonebookReduser,\r\n  },\r\n  middleware,\r\n  devContacts: process.env.NODE_ENV === \"development\",\r\n});\r\nconst persistor = persistStore(store);\r\n\r\nexport default {store, persistor};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport App from './App';\r\nimport store from './redux/store'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store.store}>\r\n      <PersistGate loading={null} persistor={store.persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nconst registerRequest = createAction('auth/registerRequest');\r\nconst registerSuccess = createAction('auth/registerSuccess');\r\nconst registerError = createAction('auth/registerError');\r\n\r\nconst loginRequest = createAction('auth/loginRequest');\r\nconst loginSuccess = createAction('auth/loginSuccess');\r\nconst loginError = createAction('auth/loginError');\r\n\r\nconst logoutRequest = createAction('auth/logoutRequest');\r\nconst logoutSuccess = createAction('auth/logoutSuccess');\r\nconst logoutError = createAction('auth/logoutError');\r\n\r\nconst getCurrentUserRequest = createAction('auth/getCurrentUserRequest');\r\nconst getCurrentUserSuccess = createAction('auth/getCurrentUserSuccess');\r\nconst getCurrentUserError = createAction('auth/getCurrentUserError');\r\n\r\nexport default {\r\n  registerRequest,\r\n  registerSuccess,\r\n  registerError,\r\n  logoutRequest,\r\n  logoutSuccess,\r\n  logoutError,\r\n  loginRequest,\r\n  loginSuccess,\r\n  loginError,\r\n  getCurrentUserRequest,\r\n  getCurrentUserSuccess,\r\n  getCurrentUserError,\r\n};","import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\nimport authActions from \"./auth-actions\";\r\n\r\nconst initialUserState = { name: null, email: null };\r\n\r\nconst user = createReducer(initialUserState, {\r\n    [authActions.registerSuccess]: (_, { payload }) => payload.user,\r\n    [authActions.loginSuccess]: (_, { payload }) => payload.user,\r\n    [authActions.logoutSuccess]: () => initialUserState,\r\n    [authActions.getCurrentUserSuccess]: (_, { payload })=> payload,\r\n});\r\n\r\nconst token = createReducer(null, {\r\n    [authActions.registerSuccess]: (_, { payload }) => payload.token,\r\n    [authActions.loginSuccess]: (_, { payload }) => payload.token,\r\n    [authActions.logoutSuccess]: () => null,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n    [authActions.registerError]: (_, { payload }) => payload,\r\n    [authActions.loginError]: (_, { payload }) => payload,\r\n    [authActions.logoutError]: (_, { payload }) => payload,\r\n    [authActions.getCurrentUserError]: (_, {payload}) => payload,\r\n});\r\n\r\nconst isAuthenticated = createReducer(false, {\r\n    [authActions.registerSuccess]: () => true,\r\n    [authActions.loginSuccess]: () => true,\r\n    [authActions.getCurrentUserSuccess]: () => true,\r\n    [authActions.registerError]: () => false,\r\n    [authActions.loginError]: () => false,\r\n    [authActions.getCurrentUserError]: () => false,\r\n    [authActions.logoutSuccess]: () => false,\r\n})\r\n\r\nexport default combineReducers({\r\n    user,\r\n    isAuthenticated,\r\n    token,\r\n    error,\r\n});","import axios from \"axios\";\r\nimport authActions from \"./auth-actions\";\r\n\r\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com\";\r\n\r\nconst token = {\r\n    set(token) {\r\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n    },\r\n    unset() {\r\n        axios.defaults.headers.common.Authorization = ' ';\r\n    },\r\n};\r\n\r\nconst register = credentials => async dispatch => {\r\n    dispatch(authActions.registerRequest());\r\n\r\n    try {\r\n        const response = await axios.post('/users/signup', credentials);\r\n\r\n        token.set(response.data.token)\r\n        dispatch(authActions.registerSuccess(response.data));\r\n    }\r\n    catch (error){\r\n        dispatch(authActions.registerError(error.message));\r\n    }\r\n};\r\n\r\nconst logIn = credentials => async dispatch => {\r\n    dispatch(authActions.loginRequest());\r\n\r\n    try {\r\n        const response = await axios.post('/users/login', credentials);\r\n\r\n        token.set(response.data.token)\r\n        dispatch(authActions.loginSuccess(response.data))\r\n    }\r\n    catch (error) {\r\n        dispatch (authActions.loginError(error.message))\r\n    }\r\n};\r\n\r\nconst logOut = () => async dispatch => {\r\n    dispatch(authActions.logoutRequest());\r\n\r\n    try {\r\n        await axios.post('/users/logout');\r\n        \r\n        token.unset();\r\n        dispatch(authActions.logoutSuccess())\r\n    }\r\n    catch (error) {\r\n        dispatch (authActions.logoutError(error.message))\r\n    }\r\n};\r\n\r\nconst getCurrentUser = () => async (dispatch, getState) => {\r\n    const {\r\n        auth: { token: persistedToken },\r\n    } = getState();\r\n\r\n    if (!persistedToken) {\r\n        return;\r\n    }\r\n    token.set(persistedToken)\r\n\r\n    dispatch(authActions.getCurrentUserRequest());\r\n\r\n    try {\r\n        const response = await axios.get('/users/current')\r\n        dispatch(authActions.getCurrentUserSuccess(response.data))\r\n    }\r\n    catch (error) {\r\n        dispatch(authActions.getCurrentUserError(error.message))\r\n    }\r\n};\r\n\r\n\r\nexport default {register, logIn, logOut, getCurrentUser}","const getIsAuthenticated = state => state.auth.isAuthenticated;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nexport default {\r\n  getIsAuthenticated,\r\n  getUsername,\r\n};"],"sourceRoot":""}